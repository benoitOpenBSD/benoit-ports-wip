running test
running egg_info
writing M2Crypto.egg-info/PKG-INFO
writing top-level names to M2Crypto.egg-info/top_level.txt
writing dependency_links to M2Crypto.egg-info/dependency_links.txt
reading manifest file 'M2Crypto.egg-info/SOURCES.txt'
writing manifest file 'M2Crypto.egg-info/SOURCES.txt'
running build_ext
building 'M2Crypto.__m2crypto' extension
swigging SWIG/_m2crypto.i to SWIG/_m2crypto_wrap.c
swig -python -I/usr/local/include/python2.5 -I/usr/include -includeall -o SWIG/_m2crypto_wrap.c SWIG/_m2crypto.i
SWIG/_bio.i:64: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_rand.i:19: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_evp.i:156: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_dh.i:36: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_rsa.i:43: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_dsa.i:31: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_ssl.i:207: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_x509.i:313: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_pkcs7.i:42: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_pkcs7.i:42: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_util.i:9: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_ec.i:111: Warning(454): Setting a pointer/reference variable may leak memory.
SWIG/_engine.i:162: Warning(454): Setting a pointer/reference variable may leak memory.
creating build
creating build/temp.openbsd-4.6-amd64-2.5
creating build/temp.openbsd-4.6-amd64-2.5/SWIG
cc -DNDEBUG -O2 -pipe -DTHREAD_STACK_SIZE=0x20000 -fPIC -O2 -pipe -fPIC -I/usr/local/include/python2.5 -I/usr/include -I/linux/tmp/py-m2crypto-0.20.2/M2Crypto-0.20.2/SWIG -c SWIG/_m2crypto_wrap.c -o build/temp.openbsd-4.6-amd64-2.5/SWIG/_m2crypto_wrap.o -DTHREADING
creating build/lib.openbsd-4.6-amd64-2.5
creating build/lib.openbsd-4.6-amd64-2.5/M2Crypto
cc -shared -L/usr/obj/ports/Python-2.5.4/Python-2.5.4 -O2 -pipe build/temp.openbsd-4.6-amd64-2.5/SWIG/_m2crypto_wrap.o -L/usr/lib -lssl -lcrypto -o build/lib.openbsd-4.6-amd64-2.5/M2Crypto/__m2crypto.so
copying build/lib.openbsd-4.6-amd64-2.5/M2Crypto/__m2crypto.so -> M2Crypto
test_BitSTring (tests.test_asn1.ASN1TestCase) ... ok
test_Integer (tests.test_asn1.ASN1TestCase) ... ok
test_Object (tests.test_asn1.ASN1TestCase) ... ok
test_String (tests.test_asn1.ASN1TestCase) ... ok
test_UTCTIME (tests.test_asn1.ASN1TestCase) ... ok
test_UTCTIME_datetime (tests.test_asn1.ASN1TestCase) ... ok
test_ciphers (tests.test_bio.CipherStreamTestCase) ... ok
test_closed (tests.test_bio_membuf.MemoryBufferTestCase) ... ok
test_init_empty (tests.test_bio_membuf.MemoryBufferTestCase) ... ok
test_init_something (tests.test_bio_membuf.MemoryBufferTestCase) ... ok
test_read_less_than (tests.test_bio_membuf.MemoryBufferTestCase) ... ok
test_read_more_than (tests.test_bio_membuf.MemoryBufferTestCase) ... ok
test_write_close (tests.test_bio_membuf.MemoryBufferTestCase) ... ok
test_closed (tests.test_bio_file.FileTestCase) ... ok
test_openfile_rb (tests.test_bio_file.FileTestCase) ... ok
test_openfile_wb (tests.test_bio_file.FileTestCase) ... ok
test_use_pyfile (tests.test_bio_file.FileTestCase) ... ok
test_closed (tests.test_bio_iobuf.IOBufferTestCase) ... ok
test_init_empty (tests.test_bio_iobuf.IOBufferTestCase) ... ok
test_init_something (tests.test_bio_iobuf.IOBufferTestCase) ... ok
test_read_less_than (tests.test_bio_iobuf.IOBufferTestCase) ... ok
test_read_more_than (tests.test_bio_iobuf.IOBufferTestCase) ... ok
test_read_only (tests.test_bio_iobuf.IOBufferTestCase) ... ok
test_readline (tests.test_bio_iobuf.IOBufferTestCase) ... ok
test_readlines (tests.test_bio_iobuf.IOBufferTestCase) ... ok
test_do_handshake_fail (tests.test_bio_ssl.SSLTestCase) ... ok
test_do_handshake_succeed (tests.test_bio_ssl.SSLTestCase) ... ok
test_pass (tests.test_bio_ssl.SSLTestCase) ... ok
test_set_ssl (tests.test_bio_ssl.SSLTestCase) ... ok
test_should_read_fail (tests.test_bio_ssl.SSLTestCase) ... ok
test_should_retry_fail (tests.test_bio_ssl.SSLTestCase) ... ok
test_should_write_fail (tests.test_bio_ssl.SSLTestCase) ... ok
test_rand (tests.test_bn.BNTestCase) ... ok
test_rand_range (tests.test_bn.BNTestCase) ... ok
test_randfname (tests.test_bn.BNTestCase) ... ok
test_cookie_str (tests.test_authcookie.AuthCookieTestCase) ... ok
test_cookie_str2 (tests.test_authcookie.AuthCookieTestCase) ... ok
test_cookie_str_arbitrary_change (tests.test_authcookie.AuthCookieTestCase) ... ok
test_cookie_str_changed_data (tests.test_authcookie.AuthCookieTestCase) ... ok
test_cookie_str_changed_exp (tests.test_authcookie.AuthCookieTestCase) ... ok
test_cookie_str_changed_mac (tests.test_authcookie.AuthCookieTestCase) ... ok
test_cookie_str_expired (tests.test_authcookie.AuthCookieTestCase) ... ok
test_expired (tests.test_authcookie.AuthCookieTestCase) ... ok
test_is_invalid_changed_data (tests.test_authcookie.AuthCookieTestCase) ... ok
test_is_invalid_changed_exp (tests.test_authcookie.AuthCookieTestCase) ... ok
test_is_invalid_changed_mac (tests.test_authcookie.AuthCookieTestCase) ... ok
test_is_invalid_expired (tests.test_authcookie.AuthCookieTestCase) ... ok
test_is_valid (tests.test_authcookie.AuthCookieTestCase) ... ok
test_make_cookie (tests.test_authcookie.AuthCookieTestCase) ... ok
test_mix_unmix (tests.test_authcookie.AuthCookieTestCase) ... ok
test_mix_unmix3 (tests.test_authcookie.AuthCookieTestCase) ... ok
test_not_expired (tests.test_authcookie.AuthCookieTestCase) ... ok
test_compute_key (tests.test_dh.DHTestCase) ... ok
test_gen_params (tests.test_dh.DHTestCase) ... ok
test_gen_params_bad_cb (tests.test_dh.DHTestCase) ... ok
test_init_junk (tests.test_dh.DHTestCase) ... ok
test_load_params (tests.test_dh.DHTestCase) ... ok
test_print_params (tests.test_dh.DHTestCase) ... ok
test_genparam_setparam_genkey (tests.test_dsa.DSATestCase) ... ok
test_loadkey (tests.test_dsa.DSATestCase) ... ok
test_loadkey_junk (tests.test_dsa.DSATestCase) ... ok
test_loadparam (tests.test_dsa.DSATestCase) ... ok
test_pub_verify (tests.test_dsa.DSATestCase) ... ok
test_sign (tests.test_dsa.DSATestCase) ... ok
test_sign_asn1 (tests.test_dsa.DSATestCase) ... ok
test_sign_with_params_only (tests.test_dsa.DSATestCase) ... ok
test_verify_fail (tests.test_dsa.DSATestCase) ... ok
test_verify_fail2 (tests.test_dsa.DSATestCase) ... ok
test_by_id_dynamic (tests.test_engine.EngineTestCase) ... ok
test_by_id_junk (tests.test_engine.EngineTestCase) ... ok
test_by_id_openssl (tests.test_engine.EngineTestCase) ... ok
test_load_certificate (tests.test_engine.EngineTestCase) ... ok
test_load_private (tests.test_engine.EngineTestCase) ... (TEST_ENG_OPENSSL_PKEY)Loading Private key tests/rsa.priv.pem
ok
test_MessageDigest (tests.test_evp.EVPTestCase) ... ok
test_as_der (tests.test_evp.EVPTestCase) ... ok
test_as_der_capture_key (tests.test_evp.EVPTestCase) ... ok
test_assign (tests.test_evp.EVPTestCase) ... ok
test_get_modulus (tests.test_evp.EVPTestCase) ... ok
test_get_rsa (tests.test_evp.EVPTestCase) ... ok
test_get_rsa_fail (tests.test_evp.EVPTestCase) ... ok
test_hmac (tests.test_evp.EVPTestCase) ... ok
test_load_bad (tests.test_evp.EVPTestCase) ... ok
test_pad (tests.test_evp.EVPTestCase) ... ok
test_pem (tests.test_evp.EVPTestCase) ... ok
test_size (tests.test_evp.EVPTestCase) ... ok
test_verify_final (tests.test_evp.EVPTestCase) ... ok
test_AES (tests.test_evp.CipherTestCase) ... ok
test_ciphers (tests.test_evp.CipherTestCase) ... ok
test_raises (tests.test_evp.CipherTestCase) ... ok
test_rfc3211_test_vectors (tests.test_evp.PBKDF2TestCase) ... ok
test_complicated (tests.test_evp.HMACTestCase) ... ok
test_simple (tests.test_evp.HMACTestCase) ... ok
test_nid (tests.test_obj.ObjectsTestCase) ... ok
test_obj2txt (tests.test_obj.ObjectsTestCase) ... ok
test_tuple2tuple (tests.test_obj.ObjectsTestCase) ... ok
test_unknown (tests.test_obj.ObjectsTestCase) ... ok
test_x509_name (tests.test_obj.ObjectsTestCase) ... ok
test_simple (tests.test_pgp.PGPTestCase) ... ok
test_bytes (tests.test_rand.RandTestCase) ... ok
test_load_save (tests.test_rand.RandTestCase) ... ok
test_pseudo_bytes (tests.test_rand.RandTestCase) ... ok
test_seed_add (tests.test_rand.RandTestCase) ... ok
test_bad (tests.test_rc4.RC4TestCase) ... ok
test_vectors (tests.test_rc4.RC4TestCase) ... ok
test_keygen (tests.test_rsa.RSATestCase) ... ok
test_keygen_bad_cb (tests.test_rsa.RSATestCase) ... ok
test_loadkey (tests.test_rsa.RSATestCase) ... ok
test_loadkey_bio (tests.test_rsa.RSATestCase) ... ok
test_loadkey_junk (tests.test_rsa.RSATestCase) ... ok
test_loadkey_pp (tests.test_rsa.RSATestCase) ... ok
test_loadkey_pp_bad_cb (tests.test_rsa.RSATestCase) ... ok
test_loadpub (tests.test_rsa.RSATestCase) ... ok
test_loadpub_bad (tests.test_rsa.RSATestCase) ... ok
test_newpub (tests.test_rsa.RSATestCase) ... ok
test_private_encrypt (tests.test_rsa.RSATestCase) ... ok
test_public_encrypt (tests.test_rsa.RSATestCase) ... ok
test_savepub (tests.test_rsa.RSATestCase) ... ok
test_set_bn (tests.test_rsa.RSATestCase) ... ok
test_sign_and_verify (tests.test_rsa.RSATestCase) ... ok
test_sign_and_verify_rsassa_pss (tests.test_rsa.RSATestCase) ... ok
test_sign_bad_method (tests.test_rsa.RSATestCase) ... ok
test_sign_fail (tests.test_rsa.RSATestCase) ... ok
test_verify_bad_method (tests.test_rsa.RSATestCase) ... ok
test_verify_bad_signature (tests.test_rsa.RSATestCase) ... ok
test_verify_mismatched_algo (tests.test_rsa.RSATestCase) ... ok
test_x509_public_encrypt (tests.test_rsa.RSATestCase) ... ok
test_crlf (tests.test_smime.SMIMETestCase) ... ok
test_decrypt (tests.test_smime.SMIMETestCase) ... ok
test_decryptBad (tests.test_smime.SMIMETestCase) ... ok
test_encrypt (tests.test_smime.SMIMETestCase) ... ok
test_load_bad (tests.test_smime.SMIMETestCase) ... ok
test_sign (tests.test_smime.SMIMETestCase) ... ok
test_signEncryptDecryptVerify (tests.test_smime.SMIMETestCase) ... ok
test_store_load_info (tests.test_smime.SMIMETestCase) ... ok
test_verify (tests.test_smime.SMIMETestCase) ... ok
test_verifyBad (tests.test_smime.SMIMETestCase) ... ok
test_load_pkcs7 (tests.test_smime.WriteLoadTestCase) ... ok
test_load_pkcs7_bio (tests.test_smime.WriteLoadTestCase) ... ok
test_load_smime (tests.test_smime.WriteLoadTestCase) ... ok
test_load_smime_bio (tests.test_smime.WriteLoadTestCase) ... ok
test_write_pkcs7_der (tests.test_smime.WriteLoadTestCase) ... ok
test_multiInitCleanup (tests.test_threading.ThreadingTestCase) ... ok
test_pass (tests.test_threading.ThreadingTestCase) ... ok
test_ext (tests.test_x509.X509TestCase) ... ok
test_extstack (tests.test_x509.X509TestCase) ... ok
test_fingerprint (tests.test_x509.X509TestCase) ... ok
test_load (tests.test_x509.X509TestCase) ... ok
test_load_bio (tests.test_x509.X509TestCase) ... ok
test_load_der_string (tests.test_x509.X509TestCase) ... ok
test_load_request_bio (tests.test_x509.X509TestCase) ... ok
test_load_string (tests.test_x509.X509TestCase) ... ok
test_long_serial (tests.test_x509.X509TestCase) ... ok
test_malformed_data (tests.test_x509.X509TestCase) ... ok
test_mkcacert (tests.test_x509.X509TestCase) ... ok
test_mkcert (tests.test_x509.X509TestCase) ... ok
test_mkproxycert (tests.test_x509.X509TestCase) ... ok
test_mkreq (tests.test_x509.X509TestCase) ... ok
test_save (tests.test_x509.X509TestCase) ... ok
test_save_der_string (tests.test_x509.X509TestCase) ... ok
test_x509_name (tests.test_x509.X509TestCase) ... ok
test_as_der (tests.test_x509.X509_StackTestCase) ... ok
test_make_stack (tests.test_x509.X509_StackTestCase) ... ok
test_make_stack_check_num (tests.test_x509.X509_StackTestCase) ... ok
test_make_stack_from_der (tests.test_x509.X509_StackTestCase) ... ok
test_ext (tests.test_x509.X509_ExtTestCase) ... ok
test_new (tests.test_x509.CRLTestCase) ... ok
test_checker (tests.test_ssl.CheckerTestCase) ... ok
test_certstore (tests.test_ssl.ContextTestCase) ... ok
test_ctx_load_verify_locations (tests.test_ssl.ContextTestCase) ... ok
test_map (tests.test_ssl.ContextTestCase) ... ok
test_session_load_bad (tests.test_ssl.SessionTestCase) ... ok
test_lib (tests.test_ssl.XmlRpcLibTestCase) ... ok
test_lib (tests.test_ssl.FtpsLibTestCase) ... ok
test_pass (tests.test_ssl.PassSSLClientTestCase) ... ok
test_HTTPS (tests.test_ssl.HttpslibSSLClientTestCase) ... ok
test_HTTPSConnection (tests.test_ssl.HttpslibSSLClientTestCase) ... ok
test_HTTPSConnection_illegalkeywordarg (tests.test_ssl.HttpslibSSLClientTestCase) ... ok
test_HTTPSConnection_resume_session (tests.test_ssl.HttpslibSSLClientTestCase) ... ok
test_HTTPSConnection_secure_context (tests.test_ssl.HttpslibSSLClientTestCase) ... ok
test_HTTPSConnection_secure_context_fail (tests.test_ssl.HttpslibSSLClientTestCase) ... ok
test_HTTPS_secure_context (tests.test_ssl.HttpslibSSLClientTestCase) ... ok
test_HTTPS_secure_context_fail (tests.test_ssl.HttpslibSSLClientTestCase) ... ok
test_urllib (tests.test_ssl.UrllibSSLClientTestCase) ... ok
test_urllib2 (tests.test_ssl.Urllib2SSLClientTestCase) ... ok
test_urllib2_leak (tests.test_ssl.Urllib2SSLClientTestCase) ... ok
test_urllib2_opener_handlers (tests.test_ssl.Urllib2SSLClientTestCase) ... ok
test_urllib2_secure_context (tests.test_ssl.Urllib2SSLClientTestCase) ... ok
test_urllib2_secure_context_fail (tests.test_ssl.Urllib2SSLClientTestCase) ... ok
test_z_urllib2_opener (tests.test_ssl.Urllib2SSLClientTestCase) ... ok
test_blocking0 (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_blocking1 (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_cipher_mismatch (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_cipher_ok (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_info_callback (tests.test_ssl.MiscSSLClientTestCase) ... LOOP: SSL connect: before/connect initialization
LOOP: SSL connect: SSLv2/v3 write client hello A
LOOP: SSL connect: SSLv3 read server hello A
LOOP: SSL connect: SSLv3 read server certificate A
LOOP: SSL connect: SSLv3 read server key exchange A
LOOP: SSL connect: SSLv3 read server done A
LOOP: SSL connect: SSLv3 write client key exchange A
LOOP: SSL connect: SSLv3 write change cipher spec A
LOOP: SSL connect: SSLv3 write finished A
LOOP: SSL connect: SSLv3 flush data
LOOP: SSL connect: SSLv3 read server session ticket A
LOOP: SSL connect: SSLv3 read finished A
INFO: SSL connect: SSL negotiation finished successfully
ALERT: write: warning: close notify
ok
test_makefile (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_makefile_err (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_no_connection (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_no_such_cipher (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_no_weak_cipher (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_server_simple (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_server_simple_secure_context (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_server_simple_secure_context_fail (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_server_simple_timeouts (tests.test_ssl.MiscSSLClientTestCase) ... ERROR
test_sslv23_no_v2 (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_sslv23_no_v2_no_service (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_sslv23_weak_crypto (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_tls1_nok (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_tls1_ok (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_use_weak_cipher (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_allow_unknown_new (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_allow_unknown_old (tests.test_ssl.MiscSSLClientTestCase) ... policy: unable to get local issuer certificate: permitted...
policy: certificate not trusted: permitted...
policy: unable to verify the first certificate: permitted...
ok
test_verify_cb_exception (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_cb_lambda (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_cb_new (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_cb_new_class (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_cb_new_function (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_cb_not_callable (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_cb_old (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_cb_wrong_callable (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_cert (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_cert_fail (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_verify_cert_mutual_auth (tests.test_ssl.MiscSSLClientTestCase) ... verify depth is 2, must return a certificate
depth=1 /C=US/ST=California/O=M2Crypto/CN=Heikki Toivonen
verify return:1
depth=0 /C=US/ST=California/O=M2Crypto/CN=X509
verify return:1
ok
test_verify_cert_mutual_auth_fail (tests.test_ssl.MiscSSLClientTestCase) ... verify depth is 2, must return a certificate
ok
test_verify_cert_mutual_auth_servernbio (tests.test_ssl.MiscSSLClientTestCase) ... verify depth is 2, must return a certificate
depth=1 /C=US/ST=California/O=M2Crypto/CN=Heikki Toivonen
verify return:1
depth=0 /C=US/ST=California/O=M2Crypto/CN=X509
verify return:1
ok
test_verify_nocert_fail (tests.test_ssl.MiscSSLClientTestCase) ... ok
test_26_compat (tests.test_ssl.FtpslibTestCase) ... ok
test_compute_key (tests.test_ecdh.ECDHTestCase) ... ok
test_init_junk (tests.test_ecdh.ECDHTestCase) ... ok
test_pubkey_from_der (tests.test_ecdh.ECDHTestCase) ... ok
test_genparam (tests.test_ecdsa.ECDSATestCase) ... ok
test_loadkey (tests.test_ecdsa.ECDSATestCase) ... ok
test_loadkey_junk (tests.test_ecdsa.ECDSATestCase) ... ok
test_loadpubkey (tests.test_ecdsa.ECDSATestCase) ... ok
test_sign_dsa_asn1 (tests.test_ecdsa.ECDSATestCase) ... ok
test_verify_dsa (tests.test_ecdsa.ECDSATestCase) ... ok
test_ec_curves_ECDSA (tests.test_ec_curves.ECCurveTests) ... ok

======================================================================
ERROR: test_server_simple_timeouts (tests.test_ssl.MiscSSLClientTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/linux/tmp/py-m2crypto-0.20.2/M2Crypto-0.20.2/tests/test_ssl.py", line 329, in test_server_simple_timeouts
    s.set_socket_write_timeout(SSL.timeout(909,9))
  File "/linux/tmp/py-m2crypto-0.20.2/M2Crypto-0.20.2/M2Crypto/SSL/Connection.py", line 349, in set_socket_write_timeout
    self.socket.setsockopt(socket.SOL_SOCKET, socket.SO_SNDTIMEO, timeo.pack())
  File "<string>", line 1, in setsockopt
error: (33, 'Numerical argument out of domain')

----------------------------------------------------------------------
Ran 236 tests in 92.412s

FAILED (errors=1)
*** Error code 1

Stop in /usr/ports/mystuff/security/py-m2crypto (line 96 of /usr/ports/lang/python/python.port.mk).
